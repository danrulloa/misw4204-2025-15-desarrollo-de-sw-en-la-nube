# ---------------------------------------
# prometheus/prometheus.yml
# ---------------------------------------
# Scrapea a sí mismo y a exporters/servicios que expongan /metrics.
# Agrega aquí tus targets (API, workers) cuando instrumentes con prometheus_client.

# Prometheus config
---
global:
  scrape_interval: 15s
  evaluation_interval: 30s

scrape_configs:
  - job_name: prometheus
    static_configs:
      - targets: ['prometheus:9090']

  - job_name: nginx
    static_configs:
      - targets: ['nginx-exporter:9113']

  - job_name: rabbitmq
    static_configs:
      - targets: ['rabbitmq:15692']

  - job_name: postgres_auth
    static_configs:
      - targets: ['pg-exporter-auth:9187']

  - job_name: postgres_core
    static_configs:
      - targets: ['pg-exporter-core:9187']

  - job_name: api
    metrics_path: /metrics
    static_configs:
      - targets: ['anb_api:8000']

